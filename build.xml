<?xml version="1.0"?> 
<project name="de.learn2prog.struktor" default="compile" basedir="."> 

     <property name="src" value="src"/> 
     <property name="build" value="build"/>
	 <property name="procParser" value="ProcParserFactory/procParser.cup"/>

     <target name="init">  
          <mkdir dir="${build}"/>
     </target>

     <target name="compile" depends="init"> 
          <!-- Compile the java code -->
          
          <javac srcdir="${src}" destdir="${build}"/>
     </target>
	<target name="Clean" description="Removes previous build">
	  <delete verbose="true">
	    <fileset dir="${build}"/>
	  </delete>
	</target>
	<target name="ProcParser" depends="init"> 
		<java dir="ProcParserFactory" fork="true" jar="lib/java-cup-11a.jar">
		         <arg line="-parser ProcParser -symbols Psym procParser.cup"/>
		         <classpath>
		         	<pathelement location="${build}"/>
		         </classpath>
		       </java>
	</target>
	<target name="jar" depends="compile">
		<jar destfile="struktor.jar" basedir="${build}">
		</jar>
	</target>
	<target name="runApplet" depends="jar">
	     <exec dir="." executable="appletviewer">
	       <arg value="struktor.html" />
	     </exec>
	</target>
</project>